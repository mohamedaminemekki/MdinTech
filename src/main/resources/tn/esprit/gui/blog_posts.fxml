<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<?import org.kordamp.ikonli.javafx.FontIcon?>
<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="tn.esprit.controllers.UserBlogController"
            stylesheets="@style.css">

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox spacing="20" alignment="CENTER" style="-fx-padding: 20;">

                <!-- Zone de création de post (compacte) -->
                <VBox fx:id="createPostBox" spacing="10" styleClass="create-post-box">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <ImageView fx:id="userAvatar" fitWidth="40" fitHeight="40"/>
                        <Label text="Créer un post" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
                    </HBox>
                    <TextField fx:id="postTitle" promptText="Titre de votre post" styleClass="rounded-textfield"/>
                    <!-- Bouton pour générer le texte du post -->
                    <Button fx:id="generatePostTextButton" text="Générer le texte du post" styleClass="generate-btn"/>
                    <TextArea fx:id="postContent" promptText="Quoi de neuf ?" styleClass="post-content-area" prefRowCount="4"/>
                    <ImageView fx:id="imagePreview" fitWidth="300" preserveRatio="true" visible="false" managed="false"/>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Button text="Photo/Video" styleClass="secondary-btn" onAction="#handleAddImage"/>
                        <ComboBox fx:id="categoryCombo" promptText="Catégorie" styleClass="rounded-combo"/>
                        <Button text="Émotion/Activite" styleClass="secondary-btn"/>
                    </HBox>
                    <Button text="Publier" styleClass="publish-btn" onAction="#handleNewPost"/>
                </VBox>

                <!-- Barre de recherche (centrée sous la zone de création) -->
                <HBox spacing="10" alignment="CENTER" style="-fx-background-color: transparent;">
                    <TextField fx:id="searchField" promptText="Rechercher un post par titre..." styleClass="search-field"/>
                    <Button text="Rechercher" onAction="#handleSearch" styleClass="search-btn"/>
                </HBox>

                <!-- Titre de la section des posts -->
                <Label text="Actualités récentes" styleClass="section-title"/>

                <!-- Conteneur pour les posts -->
                <VBox fx:id="feedContainer" spacing="20" style="-fx-alignment: center; -fx-padding: 10;"/>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
